---
layout: post
title: Задание 1. Сервис сбора метрик разработки
date:   2021-06-28 
categories: core
---
Написать сервис или группу сервисов, собирающий метрики разработки из GitLab, TFS, TeamCity. В дальнейшем будет использоваться сервис в единственном числе, но подразумевается, что количество сервисов вы определяете сами.

### Термины

**Метрика** - некий числовой или статистический показатель 

**Триггер** - пороговое значение, при превышении которого надо оповещать 

### Метрики

| Метрика                                        |Триггер                                           |
| -----------------------------------------------|--------------------------------------------------|
| Среднее время прохождения тестов в микросервисе|Среднее время прохождения тестов превышает X минут|
| Среднее время прохождения сборки микросервиса|Среднее время прохождение сборки на CI превышает X минут|
| Кто сколько комитит за день в репозиторий, за месяц|Отчет раз в период Х с топ Y самых много комитящих и Y самых мало комитящих|
| После чьего комита падают сборки|Отчет раз в период Х с топ Y тех, после чьих копитов больше всего сборок упало|
| Количество багов|Количество багов превысило пороговое значение X|
| Время закрытия релизных багов (максимальное, среднее)|Время закрытия релизных багов за период X превысило порог времени Y|
| Превышение реакции по багу выше X часов|Превышение реакции по багу выше X часов|
| Кто быстрее всех фиксит баги|Отчет раз в период X с топ Y тех кто быстрее всех фиксит баги|
| Кто медленнее всех фиксит баги|Отчет раз в период X с топ Y тех кто медленнее всех фиксит баги|
| Подсчет списанных часов за день/неделю/календарный месяц по команде и по членам команды|Списано менее Х в период Y|

Можно придумать свои метрики и триггеры по ним. Например взять из доклада TeamLead Conf 2018 [Оцениваем процессы в команде разработки на основе объективных данных](https://www.youtube.com/watch?v=-yDLzoX4re4)

Метрики нужны в этом задании. Триггеры позже. 

Источники данных - наши TFS, Gitlab, Teamcity. 

Выбираем любые 5 метрик (можно и больше). Не обязательно с разных источников, можно с одного. **Параметры X и Y в таблице должны быть настраиваемыми, например указываться при запросе данных, можно в конфигах.**

Дата начала сбора метрик указывается в файле конфигураций сервиса. По умолчанию - 1 января 2021 года.

Сервис должен работать под Linux на netcore31 или net5. Должен собирать данные и предоставлять api для запроса выбранных метрик. **Api для запроса метрик должно быть доступно даже когда источники не работают или не доступны.**

Внутри сервиса можно использовать все что угодно, за исключением общих ограничений. Можно `Akka.Net`, даже предпочтительно. Можно писать самому. `Shared.EventStore` нельзя.

Можно сделать один сервис, можно несколько. Как душе угодно.

### Definitions of Done

1. Есть репозиторий в нашем Gitlab с исходниками сервиса, доступный для просмотра.
2. Сервис можно запустить на Linux.
3. Можно подергать api и получить выбранные 5 метрик в виде json
4. README со сценариями запуска и примерами запросов для проверки работы (например curl)
5. Если не сможем запустить сервис по инструкции, задание считается не выполненым
